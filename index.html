<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YE-BALL — Seek the Wisdom of Ye</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a0f 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            color: #fff;
        }

        /* Stars background */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Container */
        .container {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 20px;
        }

        .title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(2.5rem, 10vw, 4rem);
            letter-spacing: 0.15em;
            margin-bottom: 5px;
            text-shadow: 0 0 30px rgba(138, 43, 226, 0.5);
        }

        .subtitle {
            font-size: 0.8rem;
            letter-spacing: 0.3em;
            color: #888;
            margin-bottom: 40px;
        }

        /* The 8-Ball */
        .ball-container {
            perspective: 1000px;
            margin: 20px auto;
        }

        .ball {
            width: 280px;
            height: 280px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #444, #111 50%, #000 100%);
            box-shadow: 
                inset -30px -30px 60px rgba(0,0,0,0.8),
                inset 20px 20px 40px rgba(255,255,255,0.05),
                0 0 60px rgba(0,0,0,0.8),
                0 20px 60px rgba(0,0,0,0.6);
            position: relative;
            margin: 0 auto;
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .ball:hover {
            transform: rotateX(5deg) rotateY(-5deg);
        }

        .ball.shaking {
            animation: shake 0.6s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0) rotateZ(0); }
            10% { transform: translateX(-10px) rotateZ(-5deg); }
            20% { transform: translateX(10px) rotateZ(5deg); }
            30% { transform: translateX(-10px) rotateZ(-3deg); }
            40% { transform: translateX(10px) rotateZ(3deg); }
            50% { transform: translateX(-5px) rotateZ(-2deg); }
            60% { transform: translateX(5px) rotateZ(2deg); }
            70% { transform: translateX(-3px) rotateZ(-1deg); }
            80% { transform: translateX(3px) rotateZ(1deg); }
        }

        /* The window/triangle */
        .window {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background: radial-gradient(circle, #1a1a3a 0%, #0d0d1a 100%);
            box-shadow: 
                inset 0 0 30px rgba(75, 0, 130, 0.5),
                0 0 20px rgba(75, 0, 130, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .triangle {
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 90px solid #1e1e4a;
            position: relative;
            filter: drop-shadow(0 0 10px rgba(138, 43, 226, 0.4));
        }

        .triangle-inner {
            position: absolute;
            top: 15px;
            left: -35px;
            width: 70px;
            text-align: center;
        }

        .answer {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            color: #fff;
            text-shadow: 0 0 10px rgba(138, 43, 226, 0.8);
            opacity: 0;
            transition: opacity 0.5s ease;
            line-height: 1.2;
        }

        .answer.visible {
            opacity: 1;
        }

        .answer.loading {
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        /* "8" on the ball */
        .eight {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            opacity: 0.9;
        }

        /* Input section */
        .input-section {
            margin-top: 40px;
            max-width: 400px;
            width: 100%;
        }

        .input-label {
            font-size: 0.7rem;
            letter-spacing: 0.2em;
            color: #666;
            margin-bottom: 10px;
            display: block;
        }

        textarea {
            width: 100%;
            min-height: 80px;
            padding: 15px;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #fff;
            resize: none;
            outline: none;
            transition: all 0.3s ease;
        }

        textarea::placeholder {
            color: #555;
        }

        textarea:focus {
            border-color: rgba(138, 43, 226, 0.5);
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.2);
        }

        .shake-btn {
            margin-top: 20px;
            padding: 15px 50px;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            letter-spacing: 0.15em;
            background: linear-gradient(135deg, #4a0080, #2a0050);
            color: #fff;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 30px rgba(75, 0, 130, 0.4);
        }

        .shake-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 40px rgba(138, 43, 226, 0.5);
        }

        .shake-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Quote reveal */
        .quote-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.95), transparent);
            padding: 40px 20px;
            transform: translateY(100%);
            transition: transform 0.5s ease;
        }

        .quote-panel.visible {
            transform: translateY(0);
        }

        .full-quote {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            text-align: center;
            max-width: 700px;
            margin: 0 auto 15px;
            line-height: 1.2;
            text-shadow: 0 0 30px rgba(138, 43, 226, 0.5);
        }

        .quote-attr {
            text-align: center;
            font-size: 0.8rem;
            color: #888;
            letter-spacing: 0.2em;
        }

        .ask-again {
            display: block;
            margin: 25px auto 0;
            padding: 10px 30px;
            background: transparent;
            border: 1px solid #444;
            color: #888;
            font-size: 0.75rem;
            letter-spacing: 0.15em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .ask-again:hover {
            border-color: #888;
            color: #fff;
        }

        /* Glow effect on ball when active */
        .ball.active {
            box-shadow: 
                inset -30px -30px 60px rgba(0,0,0,0.8),
                inset 20px 20px 40px rgba(255,255,255,0.05),
                0 0 80px rgba(138, 43, 226, 0.4),
                0 20px 60px rgba(0,0,0,0.6);
        }

        /* Responsive */
        @media (max-width: 400px) {
            .ball {
                width: 220px;
                height: 220px;
            }
            .window {
                width: 100px;
                height: 100px;
            }
            .triangle {
                border-left: 40px solid transparent;
                border-right: 40px solid transparent;
                border-bottom: 70px solid #1e1e4a;
            }
            .triangle-inner {
                width: 55px;
                left: -27px;
                top: 12px;
            }
            .answer {
                font-size: 0.55rem;
            }
        }

        footer {
            position: fixed;
            bottom: 10px;
            font-size: 0.65rem;
            color: #444;
            letter-spacing: 0.1em;
            z-index: 5;
        }

        .quote-panel.visible ~ footer {
            opacity: 0;
        }
    </style>
</head>
<body>
    <!-- Stars -->
    <div class="stars" id="stars"></div>

    <div class="container">
        <h1 class="title">YE-BALL</h1>
        <p class="subtitle">SHAKE FOR WISDOM</p>

        <div class="ball-container">
            <div class="ball" id="ball" onclick="shakeBall()">
                <span class="eight">∞</span>
                <div class="window">
                    <div class="triangle">
                        <div class="triangle-inner">
                            <p class="answer" id="answer">ASK YE</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="input-section">
            <label class="input-label">WHAT TROUBLES YOU?</label>
            <textarea 
                id="issueInput" 
                placeholder="Speak your truth..."
                maxlength="300"
            ></textarea>
            <button class="shake-btn" id="shakeBtn" onclick="shakeBall()">
                SHAKE THE BALL
            </button>
        </div>
    </div>

    <!-- Quote Panel -->
    <div class="quote-panel" id="quotePanel">
        <p class="full-quote" id="fullQuote"></p>
        <p class="quote-attr">— KANYE WEST</p>
        <button class="ask-again" onclick="reset()">ASK AGAIN</button>
    </div>

    <footer>Powered by the cosmos & api.kanye.rest</footer>

    <script>
        // Create stars
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.width = star.style.height = (Math.random() * 2 + 1) + 'px';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }

        let isShaking = false;

        async function shakeBall() {
            if (isShaking) return;
            
            const issue = document.getElementById('issueInput').value.trim();
            if (!issue) {
                document.getElementById('issueInput').focus();
                return;
            }

            isShaking = true;
            const ball = document.getElementById('ball');
            const answer = document.getElementById('answer');
            const btn = document.getElementById('shakeBtn');
            
            btn.disabled = true;
            ball.classList.add('shaking', 'active');
            answer.textContent = '...';
            answer.classList.remove('visible');
            answer.classList.add('loading');

            try {
                // Start fetching
                const fetchPromise = fetch('https://api.kanye.rest/').then(r => r.json());
                
                // Shake animation duration
                await new Promise(resolve => setTimeout(resolve, 600));
                ball.classList.remove('shaking');
                
                // Wait for quote
                const data = await fetchPromise;
                
                // Brief pause for effect
                await new Promise(resolve => setTimeout(resolve, 400));
                
                // Show preview in ball
                answer.classList.remove('loading');
                answer.textContent = truncate(data.quote, 30);
                answer.classList.add('visible');
                
                // Show full quote panel after delay
                await new Promise(resolve => setTimeout(resolve, 800));
                document.getElementById('fullQuote').textContent = `"${data.quote}"`;
                document.getElementById('quotePanel').classList.add('visible');
                
            } catch (error) {
                const fallbacks = [
                    "I am God's vessel. But my greatest pain in life is that I will never be able to see myself perform live.",
                    "I hate when I'm on a flight and I wake up with a water bottle next to me like oh great now I gotta be responsible for this water bottle.",
                    "I feel like I'm too busy writing history to read it.",
                    "People always tell you 'Be humble. Be humble.' When was the last time someone told you to be amazing?",
                    "Everything I'm not made me everything I am.",
                    "I am not a fan of the word 'No.'",
                    "My greatest award is what I'm about to do."
                ];
                const quote = fallbacks[Math.floor(Math.random() * fallbacks.length)];
                
                answer.classList.remove('loading');
                answer.textContent = truncate(quote, 30);
                answer.classList.add('visible');
                
                await new Promise(resolve => setTimeout(resolve, 800));
                document.getElementById('fullQuote').textContent = `"${quote}"`;
                document.getElementById('quotePanel').classList.add('visible');
            }
        }

        function truncate(str, len) {
            if (str.length <= len) return str;
            return str.substring(0, len).trim() + '...';
        }

        function reset() {
            isShaking = false;
            document.getElementById('quotePanel').classList.remove('visible');
            document.getElementById('ball').classList.remove('active');
            document.getElementById('answer').textContent = 'ASK YE';
            document.getElementById('answer').classList.add('visible');
            document.getElementById('shakeBtn').disabled = false;
            document.getElementById('issueInput').value = '';
        }

        // Keyboard submit
        document.getElementById('issueInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                shakeBall();
            }
        });
    </script>
</body>
</html>
